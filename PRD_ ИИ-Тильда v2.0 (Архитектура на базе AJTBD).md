# PRD: ИИ-Тильда v2.0 (Архитектура на базе AJTBD)

**Документ:** Product Requirements Document
**Продукт:** ИИ-Тильда v2.0
**Версия:** 2.0
**Дата:** 28.01.2026

## 1. Введение и Обзор

**ИИ-Тильда v2.0** — это сервис на базе ИИ-агентов, который создает лендинги для пользователей, не разбирающихся в маркетинге и веб-разработке. В отличие от первой версии, v2.0 полностью переработана с учетом методологии **Advanced Jobs To Be Done (AJTBD)**, где вся сложность скрыта от пользователя «под капотом».

Продукт превращается из «допросника» в умного **помощника-интервьюера**, который ведет естественный диалог, а затем самостоятельно анализирует информацию и генерирует готовый сайт.

**Целевая аудитория:** «Блондинки» — предприниматели, фрилансеры, эксперты, которые хотят быстро получить работающий лендинг для своего продукта или услуги, не вникая в технические и маркетинговые детали.

**Проблема:** Пользователи не могут создать эффективный лендинг, потому что не знают, *что* и *как* говорить своей аудитории. Существующие конструкторы сайтов решают техническую проблему, но не помогают с контентом и структурой.

**Ценностное предложение:** Мы проводим с вами короткое интервью на простом языке, а наш ИИ-маркетолог сам определяет вашу ценность, «работу» клиента и создает под это лендинг, который продает.

## 2. Цели и Метрики

*   **Бизнес-цель:** Увеличить конверсию в успешно сгенерированный сайт с 5% (гипотетически для v1) до 50%.
*   **Пользовательская метрика:** Снизить количество отказов на этапе опроса на 80%.
*   **Техническая метрика:** 95% генерируемых сайтов должны проходить валидацию HTML без критических ошибок.

## 3. Пользовательский сценарий (User Flow)

Сценарий полностью переработан, чтобы быть максимально дружелюбным. Вся AJTBD-логика скрыта от пользователя.

![User Flow Diagram](https://i.imgur.com/example.png) *(Примечание: Схема будет сгенерирована и вставлена позже)*

**Шаг 1: Приветствие и начало интервью**

*   **Система:** Привет! Я ваш личный ИИ-помощник по созданию сайтов. Чтобы сделать для вас классный лендинг, мне нужно задать всего несколько вопросов о вашем деле. Готовы?
*   **Пользователь:** Да, готов.

**Шаг 2: Диагностическое интервью (сбор «сырых» данных)**

*   Система задает 3-4 простых, открытых вопроса. **Никаких терминов.**
    1.  *«Расскажите о вашем продукте или услуге так, как будто объясняете другу за чашкой кофе. Что это такое и для кого?»*
    2.  *«Представьте вашего идеального клиента. Что у него "болит" в тот момент, когда он начинает искать что-то похожее на ваше предложение?»*
    3.  *«Что происходит сразу после того, как клиент воспользовался вашей услугой? Какой самый первый, самый быстрый результат он получает? Что он чувствует в этот момент?»*
    4.  *«Почему клиенты выбирают именно вас, а не делают это сами или уходят к другим? Может, у вас проще, быстрее, надежнее?»*

**Шаг 3: Внутренний анализ (скрыт от пользователя)**

*   **Агент-Аналитик** получает полный текст интервью.
*   Он использует специальный **«AJTBD-промпт»**, чтобы извлечь из рассказа пользователя ключевые сущности: `Core Job`, `Big Job`, `Точка А` (проблема), `Точка Б` (результат), `Ценность`, `Конкуренты`, `Барьеры`.
*   Результат этого шага — структурированный JSON-объект с маркетинговым анализом.

**Шаг 4: Генерация контента и структуры (скрыт от пользователя)**

*   **Агент-Генератор** получает JSON с AJTBD-сущностями.
*   Он использует **«Промпт генерации лендинга»** (по мотивам промпта Замесина), чтобы на основе этих сущностей создать детальный план сайта: структуру блоков, заголовки, тексты, призывы к действию.
*   Результат — еще один JSON, описывающий каждый блок сайта.

**Шаг 5: Генерация HTML и показ результата**

*   **HTML-Рендерер** (простая функция) берет JSON со структурой сайта и накладывает его на заранее подготовленный HTML/CSS-шаблон.
*   **Система:** Готово! Я всё проанализировал и собрал для вас прототип сайта. Посмотрите, как вам?
*   Пользователю показывается сгенерированный HTML-лендинг.

**Шаг 6: Редактирование через диалог**

*   Пользователь может вносить правки прямо в чате.
*   **Пользователь:** *«Супер! Только давай поменяем заголовок на главном экране на "Прокачаем вашу команду за 2 недели"».*
*   **Система:** Понял. Меняю заголовок.
*   **Как это работает «под капотом»:**
    1.  Запрос пользователя (`поменяй заголовок на...`) и текущий JSON-план сайта отправляются **Агенту-Редактору**.
    2.  Агент находит нужный блок и поле в JSON (например, `blocks[0].content.title`) и вносит изменение.
    3.  Обновленный JSON снова отправляется в **HTML-Рендерер**.
    4.  Страница мгновенно обновляется с новым заголовком.

## 4. Функциональные требования

*   **Диалоговый интерфейс:** Основной способ взаимодействия — чат.
*   **Генерация HTML/CSS:** Система должна генерировать валидный, семантичный и адаптивный HTML-код.
*   **Редактирование контента:** Пользователь должен иметь возможность изменять тексты, заголовки и другие элементы через чат.
*   **Выбор стиля (опционально для MVP):** Возможность выбора базовой цветовой схемы и шрифтовой пары.

## 5. Техническая архитектура (Демо на LangChain + DeepAgents)

*   **Оркестратор:** `LangChain` будет управлять общей цепочкой вызовов агентов (Interview -> Analyze -> Generate -> Edit).
*   **Агенты (`DeepAgents`):**
    *   **`InterviewerAgent`:** Ведет диалог с пользователем (Шаг 2).
    *   **`AnalyzerAgent`:** Внутренний агент для извлечения AJTBD-сущностей (Шаг 3).
    *   **`GeneratorAgent`:** Внутренний агент для создания JSON-структуры сайта (Шаг 4).
    *   **`EditorAgent`:** Внутренний агент для изменения JSON-структуры по запросу пользователя (Шаг 6).
*   **HTML-Рендерер:** Простая функция на Python (например, с использованием `Jinja2`), которая принимает JSON и возвращает HTML-строку.
*   **Фреймворк:** `FastAPI` для бэкенда, `React/Vue` для фронтенда, который будет отображать чат и IFrame с сгенерированным сайтом.

## 6. Промпты (Исправленная версия)

### Промпт 1: `InterviewerAgent` (Начало диалога)

```
Ты — дружелюбный ИИ-помощник, который помогает людям создавать сайты. Твоя задача — провести короткое интервью, чтобы понять суть бизнеса клиента. Задавай вопросы по одному. Будь вежливым и ободряющим. Не используй никаких сложных терминов.

Начни диалог с приветствия и первого вопроса:
"Привет! Я ваш личный ИИ-помощник по созданию сайтов. Чтобы сделать для вас классный лендинг, мне нужно задать всего несколько вопросов о вашем деле. Начнем?

Расскажите о вашем продукте или услуге так, как будто объясняете другу за чашкой кофе. Что это такое и для кого?"
```

*(Далее агент задает остальные вопросы из Шага 2 User Flow)*

### Промпт 2: `AnalyzerAgent` (Внутренний анализ)

```
Ты — ИИ-маркетолог, эксперт по методологии Advanced Jobs To Be Done. Тебе на вход дан транскрипт интервью с клиентом. Твоя задача — проанализировать его рассказ и извлечь следующие сущности: Core Job, Big Job, Точка А (проблема, контекст), Точка Б (результат, эмоции), Ценность (почему он, а не другие), Конкуренты (кого "увольняют"), Барьеры (что мешает купить).

Выведи результат строго в формате JSON, без лишних слов.

**Транскрипт интервью:**
{{user_interview_text}}

**JSON-результат:**
```json
{
  "core_job": "...",
  "big_job": "...",
  "point_a": {
    "problem": "...",
    "context": "...",
    "emotions": "..."
  },
  "point_b": {
    "result": "...",
    "emotions": "..."
  },
  "value_proposition": "...",
  "competitors": "...",
  "barriers": "..."
}
```

### Промпт 3: `GeneratorAgent` (Генерация структуры сайта)

```
Ты — UX-архитектор и копирайтер. Тебе на вход дан JSON с анализом продукта по методологии AJTBD. Твоя задача — спроектировать структуру лендинга и написать для каждого блока текст, основываясь на этих данных. Структура должна следовать логике AJTBD: Oneliner, Точка Б, Точка А, Как это работает, Увольнение конкурентов, CTA.

Выведи результат строго в формате JSON, который описывает каждый блок сайта.

**AJTBD-анализ:**
{{ajtbd_json}}

**JSON-структура сайта:**
```json
{
  "settings": {
    "theme": "light",
    "accent_color": "#007AFF"
  },
  "blocks": [
    {
      "id": "hero",
      "type": "hero",
      "content": {
        "oneliner": "...", // Сформулировано на основе Core Job и Ценности
        "subtitle": "...", // Раскрывает oneliner
        "cta_text": "Узнать больше"
      }
    },
    {
      "id": "point_b",
      "type": "features",
      "content": {
        "title": "Вот что вы получите", // Заголовок про результат
        "items": [
          {"icon": "check", "text": "..."}, // Из Big Job и Point B result
          {"icon": "smile", "text": "..."} // Из Point B emotions
        ]
      }
    },
    // ... и так далее для всех блоков
  ]
}
```

### Промпт 4: `EditorAgent` (Редактирование сайта)

```
Ты — ИИ-ассистент, который помогает редактировать сайт. Тебе дан запрос пользователя на изменение и текущая структура сайта в формате JSON. Твоя задача — понять, какой блок и какой элемент текста пользователь хочет изменить, и внести это изменение в JSON.

Выведи на выходе только обновленный JSON, без комментариев.

**Запрос пользователя:**
{{user_edit_request}}

**Текущий JSON сайта:**
{{current_site_json}}

**Обновленный JSON сайта:**
```json
// ... измененный JSON
```

## 7. Риски и допущения

*   **Риск:** Пользователь может давать слишком короткие или неинформативные ответы на интервью. **Смягчение:** `InterviewerAgent` должен уметь задавать уточняющие вопросы («А можете рассказать чуть подробнее про...?»).
*   **Риск:** Качество генерации HTML/CSS сильно зависит от качества шаблона. **Смягчение:** Необходимо разработать несколько качественных, универсальных и хорошо прокомментированных шаблонов.
*   **Допущение:** Для MVP редактирование касается только текстового контента. Изменение структуры, добавление/удаление блоков — функционал для будущих версий.
